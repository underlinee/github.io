---
layout: post
title:  "스프링 5.0 마이크로서비스 - MSA 역량 모델"
date:   2018-04-10 00:01:01
group: 책읽고밑줄
booklink: "http://www.aladin.co.kr/shop/wproduct.aspx?ItemId=132176859"
bookimg: "http://image.aladin.co.kr/product/13217/68/cover/k462532593_1.jpg"
tags:	스프링5.0마이크로서비스 MSA 
---

마이크로서비스 역량 모델은 업계에 존재하는 성공적인 마이크로서비스 구현에서 얻은 모범 사례, 공통 패턴 및 설계 가이드라인을 바탕으로 한다. 역량모델을 통해 마이크로서비스를 여러 관점에서 바라보고 고민해야 한다. 

<br/>

## 핵심 역량
- **서비스 종단점**: 외부의 서비스 소비자가 서비스에게 요청을 전송할 수 있게 공개한 API
- **서비스 구현**: 비즈니스 로직의 구현 

<br/>

## 지원 역량
- **서비스 게이트웨이**: 프로시 역할이나 여러 개의 종단점을 조합, 정책 강제 적용이라 로드 밸런싱에도 사용
- **소프트웨어 정의 로드 밸런서**: 새로운 서비스가 추가되면 자동으로 감지 및 논리적 클러스터에 추가. 반대의 경우도 자동으로 서비스에서 제외되어야 한다. 
- **중앙 집중형 로그 관리**: 로그가 분산되면 서비스 동작을 이해하고 디버깅하기 어려워진다. 중앙 저장소에 적재하면 서비스 동작 파악과 다양한 분석이 가능해진다. 모든 로그에 연관 관계 ID를 부여하자. 
- **서비스 탐색**: 서비스가 요청을 처리할 준비가 되었음을 알려주고, 서비스 토폴로지를 이해하는 데 필요한 정보를 제공한다. 
- **보안 서비스**: 서비스 인증이나 토큰 서비스 같은 서비스 보안을 담당할 중앙의 서버가 필요
- **서비스 환경설정**: 환경설정 정보 모두가 외부화되어 한곳에서 관리하는 것이 좋다. 동적으로 변할 필요가 없다면 프로파일로도 충분하다. 
- **운영 모니터링**: 여러 버전의 서비스 인스턴스에서는 문제 지점 식별하기가 어렵기 때문에 강력한 모니터링이 필요하다. 
- **의존관계 관리**: 의존 관계를 낮추고, 서킷 브레이커 같은 패턴으로 문제가 확산되는 것을 막는다. 의존 관계를 시각화해서 모니터링한다. 
- **데이터 호수**: 마이크로서비스에 맞게 각기 추상화된 데이터는 파편화 문제가 있을 수 있다. 
- **신뢰성 메시징**: 리액티브 시스템을 사용한다면 신뢰성있는 고가용성 메시징 서비스가 필요하다. 

<br/>

## 인프라스트럭처 역량
- **클라우드**: 가상머신이나 컨테이너를 자동으로 프로비저닝할 수 
있는 탄력적인 클라우드 방식이 적합하다
- **컨테이너 오케스트레이션**: 컨테이너나 가상머신의 수가 많으면 배포, 트래픽 라우팅 등에 어려움이 있다. 배포, 트래픽제어, 인스턴스 복제, 무중단 업그레이드를 자동으로 수행할 수 있다. 
 
<br/>

## 프로세스 및 통제 역량
- **데브옵스**: 마이크로서비스 구현에 필요한 애자일, CI, 자동화된 QA, 배포 프로세스를 도입해야 한다. 이를 위해 자동화 도구가 필요하다. 
- **마이크로서비스 문서화**: 탈중앙화된 모델에서는 모든 서비스의 파악이 용이해야 한다. 어느 종단점을 공개하여 무슨 서비스를 제공하며, 어떻게 접근을 허용할지를 이해하고 중앙의 API 저장소에 담아두는 것이 중요하다. 
- **참조 아키텍처 및 라이브러리**: 각자 서로 다른 패턴, 도구, 기술을 사용할 수 있는데 이런 점이 지나치면 효율성과 재사용성이 어려워질 수 있다. 더 나은 서비스를 만드는 기준이 되는 참조 모델, 모범 사례와 가이드라인이 있어야 한다. 

<br/>