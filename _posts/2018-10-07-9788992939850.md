---
layout: post
title:  "도메인 주도 설계 - 동작하는 도메인 모델 만들기"
date:   2018-10-07 01:43:59
group: 책읽고밑줄
booklink: "http://www.aladin.co.kr/shop/wproduct.aspx?ItemId=12174216"
bookimg: "https://image.aladin.co.kr/product/1217/42/cover/899293985x_1.jpg"
tags: 도메인주도설계 설계
---

소프트웨어의 본질은 해당 소프트웨어의 사용자를 위해 도메인에 관련된 문제를 해결하는 능력에 있다. 그 밖의 매우 중요하다 할 수 있는 기능도 모두 이러한 기본적인 목적을 뒷받침하는 데 불과하다. 도메인이 복잡하면 이 같은 문제 해결은 유능하고 숙련된 사람의 집중적인 노력이 필요한 어려운 일이 된다. 개발자는 업무 지식을 증진하기 위해 도메인 연구에 몰두해야 한다. 그뿐만 아니라 모델링 기법을 연마해서 도메인 설계에 통달해야 한다. 

<br/>

## 지식 탐구
훌륭한 프로그래머라면 애초부터 추상화를 시작해서 더욱 많은 일을 해낼 수 있는 모델로 발전시킬 것이다. 하지만 이 같은 과정이 도메인 전문가와의 협업 없이 기술적인 측면에서만 일어난다면 개념은 초보적인 수준에 머무를 것이다. 이러한 피상적인 지식은 기초적인 역할만 수행하는 소프트웨어를 만들어 낼 뿐 도메인 전문가의 사고방식과 긴밀하게 연결되지는 않는다. 

모든 구성원이 함께 모델을 면밀히 만들어 나가면 팀 구성원 간의 상호작용은 그 양상을 달리한다. 도메인 모델의 지속적인 정제를 토대로 개발자는 기능만을 기계적으로 만드는 데 머무르지 않고 자신이 보조하고 있는 업무의 중요 원칙들을 배운다. 도메인 전문가들은 자신이 알고 있는 지식의 정수만을 추출해내야 하므로 스스로 이해하는 바를 자주정제하고, 그리하여 소프트웨어 프로젝트에서 요구하는 개념적 엄밀함을 이해하게 된다. 

이러한 모든 과정을 거쳐 팀 구성원은 더욱 유능한 지식 탐구자로 거듭난다. 그들은 모델과 관계없는 것은 가려내고 모델을 더욱 유용한 형태로 고쳐 만든다. 분석가와 프로그래머 모두가 모델을 만들어 나가므로 모델은 명료하게 조직화되고 추상화될 수 있으며, 구현을 더 용이하게 만든다. 도메인 전문가의 지속적인 관여로 모델은 심층적인 업무 지식을 반영하고, 추상화된 개념은 참된 업무 원칙에 해당한다. 
 
<br/>

## 의사소통과 언어 사용
프로젝트에서 사용하는 언어가 분열되면 심각한 문제가 발생한다. .도메인 전문가는 자신의 전문 용어를 사용하고 기술적인 업무를 맡은 팀원들은 설계 측면에서 도메인에 관한 토론에 적합한 자신들만의 언어를 사용한다. 일상적인 토론에서 쓰이는 용어가 코드에 녹아든 용어와 단절된다. 그리고 같은 사람인데도 말할 때나 글을 쓸 때 서로 다른 용어를 써서 도메인의 가장 간결하고 명확한 표현이 일시적인 형태로 나타났다가 코드나 문서에도 담기지 않는 결과가 나타나기도 한다. 

모델을 언어의 근간으로 사용하라. 팀 내 모든 의사소통과 코드에서 해당 언어를 끊임없이 적용하는 데 전념하라. 다이어그램과 문서에서, 그리고 특히 말할 때 동일한 언어를 사용하라. 대안 모델을 반영하는 대안이 되는 표현을 시도해 봄으로써 어려움을 해소하라 그런 다음 새로운 모델에 맞게끔 클래서, 메서드, 모듈의 이름을 다시 지으면서 코드를 리팩터링하라. 일상적으로 쓰는 단어의 의미에 동의를 이끌어내는 것과 같은 방식으로 대화할 때 쓰는 용어의 혼란도 해결하라. Ubiquitous Language의 변화가 곧 모델의 변화라는 것을 인식하라. 

<br/>

## 모델과 구현의 연계
설계 혹은 설계의 주된 부분이 도메인 모델과 대응하지 않는다면 그 모델은 그다지 가치가 없으며 소프트웨어의 정확함도 의심스러워진다. 동시에 모델과 설계 기능 사이의 복잡한 대응은 이해하기 힘들고, 실제로 설계가 변경되면 유지보수가 불가능해진다. 분석과 설계가 치명적으로 동떨어지고, 그에 따라 각자의 활동에서 얻은 통찰력이 서로에게 전해지지 않는다. 

소프트웨어 시스템의 일부를 설계할 때는 도메인 모델을 있는 그대로 반영해서 설계와 모델의 대응을 분명하게 하라. 또한 모델을 재검토해서 더욱 자연스럽게 소프트웨어로 구현될 수 있게 수정하라. 도메인에 관한 더욱 심층적인 통찰력을 반영하려 할 때도 마찬가지다. 이렇듯 견고한 Ubiquitous Language 를 지원하는 것과 더불어 분석과 설계의 두 가지 측면을 충분히 만족하는 단 하나의 모델을 만들어내야 한다. 

모델로부터 설계와 기본적인 책임 할당에 사용한 용어를 도출하라. 코드를 작성할 때 그러한 용어를 사용하면 코드가 모델을 표현할 것이 되고, 코드의 변경이 곧 모델의 변경으로 이어질 수 있다. 그 효과는 프로젝트의 나머지 활동에도 퍼져나가야 한다. 

<br/>

- - - -

<br/>

내가 경험한 개발 현장에서는 모델이 없었다. 도메인이라는 용어를 사용하기는 했지만, 도메인이라는 용어와 모델의 의미에 대해서 서로 합의한 적도 이야기를 나눈 적도 없었다. 컴포넌트를 역할 별로 분리할 때도 해당 컴포넌트의 기능에 대해서만 의견을 나누었지, 전체 시스템 상에서 그 역할이 어떤 역할을 맡아 어떤 방향으로 발전하게 될 지에 대해 이야기하지 않았다.  점진적인 개선이라고 생각하는 편이 맞았던 걸까? 아니면 내가 제대로 된 리뷰를 받지 못한 것이 문제였을까.
{: .memo}

다른 문제도 있었다. 이 책에서 말하는 도메인 전문가는 기획자를 말하는 것이라고 보았는데, 내가 만난 기획자들을 도메인 전문가라고 부르기는 어려웠다. 서비스의 스펙이 명확하게 정리되어 있지 않고, 스펙을 정확히 아는 사람도 없었기 때문에 가끔 개발자들이 코드를 해석해서(코드는 해석해야 했다) 기획자에게 서비스의 기능을 설명해주는 일도 있었다. 코드의 내용을 기획자가 이해하기 쉽게 번역하는 일을 잘하는 것이 개발자의 능력이라고 생각하기도 했다. 
{: .memo}

<br/>
