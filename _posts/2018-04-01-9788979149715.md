---
layout: post
title:  "리팩토링 - 개론"
date:   2018-03-31 16:43:59
group: 책읽고밑줄
booklink: "http://www.aladin.co.kr/shop/wproduct.aspx?ItemId=20793053"
bookimg: "http://image.aladin.co.kr/product/2079/30/cover/8979149719_1.jpg"
tags:	리팩토링 java
---

## 리팩토링은 무엇인가
리팩토링은 소프트웨어를 더 이해하기 쉽고 수정하기 쉽게 만들기 위해, 겉으로 드러나는 기능은 그대로 둔 채, 알아보기 쉽고 수정하기 간편하게 소프트웨어 내부를 수정하는 작업이다. 소프트 웨어 개발에 리팩토링을 적용할 때 기능 추가와 리팩토링이라는 별개의 두 작업에 시간을 분배해야 한다. 처음에 새 기능을 추가하다가, 그 코드의 구조를 바꾸면 작업이 훨씬 쉬워지겠다는 생각이 들어 작업을 멈추고 잠시 리팩토링 작업으로 전환한 후 구조 변경이 끝나면 다시 새 기능 추가 작업으로 전환하고, 새 기능이 제대로 돌아가면 그 기능을 이해하기 어려운 구조로 작성했다는 생각이 들어 다시 리팩토링 작업으로 전환하는 식으로 두 모자를 바꿔 쓰게 된다. 이 모든 작업 과정은 10 분이면 끝날 만큼 간단할 수도 있지만, 이 시간 동안 각 작업이 완료될 때까지는 반드시 본인이 현재 하고 있는 작업의 일관성을 유지해야 한다. 

<br/>

## 리팩토링은 왜 해야 하나
- 단기적인 목적 때문에 코드를 수정하거나 코드의 설계를 완벽히 이해하지 않고 코드를 수정하면, 코드 구조가 뒤죽박죽되어 그 코드를 보고 설계를 파악하기가 어려워진다. 
- 최초 단계의 리팩토링은 ‘우선 창 밖이 보이게 뿌연 유리창부터 닦는 일’과 같다고 했다. 그냥 지나쳤을 사항도 리팩토링하면 더 자세히 이해할 수 있다. 
- 버그 리포트를 받았을 정도면 그 만큼 그 코드가 지저분하다는 반증이다. 리팩토링을 통해 빈틈없는 코드로 거듭날 수 있다. 켄트 벡은 "난 뛰어난 프로그래머는 아니고, 단지 습관을 잘 들인 착실한 프로그래머다" 라고 자기암시를 하고는 했다. 
- 리팩토링은 일부러 시간을 내서 하는 것이 아니다. 뭔가 다른 걸 해야 겠는데 리팩토링을 실시하면 그 작업이 쉬워지기 때문에 하는 것이다. 

> 리팩토링이 부담스러운 이유는 리팩토링에는 많은 수정이 동반되기 때문이다. 긁어 부스럼 만드는 일이 아닌가 싶어 쉽게 손을 대기 어렵다. 레거시가 레거시인 이유는 테스트가 없고 테스트를 만들기 어려운 구조이기 때문이다. 여기서 딜레마가 발생한다. 리팩토링을 위해서는 테스트가 필요한데 레거시 코드는 테스트를 만들기가 어렵다. 
{: .memo}

<br/>

## 리팩토링과 설계
리팩토링은 설계를 보완하는 특수한 역할을 한다. 많은 사람은 설계가 핵심이고, 프로그래밍은 도구에 불과하다고 생각한다. 이러한 비유는 마치 설계는 기술 도면이고, 코드는 건설 작업으로 생각하는 것과도 같다. 그러나 소프트웨어는 실물의 기계와 달라 유연하며 하나부터 열까지 생각을 통해 이루어진다. "설계를 하면 생각이 아주 빨라지지만 그 생각엔 빈틈이 많다"

리팩토링을 실시하면 중심적인 작업이 달라진다. 여전히 사전 설계는 해야 하지만 사전 설계 과정에서는 완벽한 솔루션을 찾을 필요 없이 적당한 솔루션만 생각하면 된다. 솔루션을 구축해 나가면서 문제를 더 잘 이해하게 되며, 최상의 솔루션이 처음의 생각과는 다르다는 사실을 깨닫게 된다. 리팩토링을 시시하면 수정 비용이 들지 않으니 그쯤은 문제도 아니다. 

<br/>