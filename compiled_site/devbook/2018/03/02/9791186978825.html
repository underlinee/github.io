<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>이펙티브 파이썬 - 파이썬다운 생각</title>
  <meta name="description" content="복잡한 표현식 대신 헬퍼 함수를 작성하자표현식이 복잡해지기 시작하면 해당 로직을 헬퍼 함수로 옮기는 방안을 고려해야 한다. 무조건 짧은 코드보다는 가독성을 선택하는 편이 낫다.&gt;&gt;&gt; values.get(‘red’, [‘’])[0] or 0&gt;&gt;&gt; re...">
  
  <meta name="author" content="JB">
  <meta name="copyright" content="&copy; JB 2018">
  

  <!-- External libraries -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/monokai-sublime.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/assets/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  

  

  

  <!-- Site styles -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://underlinee.github.io/devbook/2018/03/02/9791186978825.html">
  <link rel="alternate" type="application/rss+xml" title="Underlinee" href="http://underlinee.github.io/feed.xml" />
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <!-- <a href="/" class="logo">
      
      <img src="/assets/logo.png" alt="Underlinee">
      
    </a> -->
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
        
          
        
          
          <li class="nav-link"><a href="/bookshelf/">Bookshelf</a>
          
        
          
        
          
        
          
        
          
          <li class="nav-link"><a href="/posts/">Posts</a>
          
        
          
        
          
        
      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
        <div class="post">

<div class="post-header-container " >
  <div class="scrim ">
    <header class="post-header">
      <h1 class="title">이펙티브 파이썬 - 파이썬다운 생각</h1>
    </header>
  </div>
</div>

<div class="wrapper">

 <span class="page-divider">
  <span class="one"></span>
  <span class="two"></span>
</span>
 

<section class="post-meta">
  <div class="post-date">March 2, 2018</div>
  <div class="post-categories">
  in 
    
    <a href="/category/DevBook">Devbook</a>
    
  
  </div>
</section>

<article class="post-content">
  <h2 id="section">복잡한 표현식 대신 헬퍼 함수를 작성하자</h2>
<p>표현식이 복잡해지기 시작하면 해당 로직을 헬퍼 함수로 옮기는 방안을 고려해야 한다. 무조건 짧은 코드보다는 가독성을 선택하는 편이 낫다.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>&gt;&gt;&gt; values.get(‘red’, [‘’])[0] or 0
&gt;&gt;&gt; red = get_frist_int(values, ‘red’)
</code></pre>
</div>

<p><br /></p>

<h2 id="section-1">시퀀스를 슬라이스하는 방법을 알자.</h2>
<p>슬라이싱 문법의 기본 형태는 somelist[start:end] 이며, end 인덱스는 제외된다. 시퀀스의 일부분을 슬라이스하여 할당하면 원본 시퀀스의 지정한 범위를 대체한다. 또한 파이썬에는 somelist[start:end:stride]처럼 슬라이스의 스트라이드를 설정하는 문법도 있다. 이 문법을 사용하면 매 n번째 아이템 그룹을 쉽게 가져올 수 있다. 하지만 한 슬라이스에 start, end, stride를 함께 쓰지 말자. 대괄호 하나에 숫자가 세 개나 있으면 start, end, stride가 연계하여 어떤 작용을 하는지 분명하지 않다. 괜한 버그의 가능성을 만들기보다는 필요하다면 할당을 두 번 하는 것이 낫다.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>&gt;&gt;&gt; Before[1:3] = ['a','b']
&gt;&gt;&gt; Before = [1,2,3,4,5]
&gt;&gt;&gt; Before[1:3] = ['a','b']
&gt;&gt;&gt; Before
[1, 'a', 'b', 4, 5]
</code></pre>
</div>
<div class="highlighter-rouge"><pre class="highlight"><code>&gt;&gt;&gt; After = Before[:]
&gt;&gt;&gt; After
[1, 'a', 'b', 4, 5]
</code></pre>
</div>
<p><br /></p>

<h2 id="map-filter----">map과 filter 대신 리스트 컴프리헨션을 사용하자</h2>
<p>파이썬에는 한 리스트에서 다른 리스트를 만들어내는 간결한 문법이 있다. 이 표현식을 리스트 컴프리헨션이라고 한다. map이나 filter는 추가적인 lamda 식이 필요해서 명확하지 않다. 딕셔너리나 세트도 컴프리헨션 표현식을 지원한다.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>&gt;&gt;&gt; rank = {'kakao':1, 'google':2, 'naver':3}
&gt;&gt;&gt; name_dict = {rank: name for name, rank in rank.items()}
&gt;&gt;&gt; name_len_set = {len(name) for name in name_dict.values()}
&gt;&gt;&gt; name_dict
{1: 'kakao', 2: 'google', 3: 'naver'}
&gt;&gt;&gt; name_len_set
set([5, 6])
</code></pre>
</div>
<p>리스트 컴프리헨션에서 다중 루프와 다중 조건을 지원하지만, 표현식을 두 개 넘게 쓰지 말자. 이런 코드는 이해하기 매우 어렵다.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>&gt;&gt;&gt; matrix = [[1,2,3], [4,5,6], [7,8,9]]
&gt;&gt;&gt; filtered = [[x for x in row if x % 3 == 0]
... for row in matrix if sum(row) &gt;= 10]
&gt;&gt;&gt; filtered
[[6], [9]]
</code></pre>
</div>
<p><br /></p>

<h2 id="section-2">컴프리헨션에서 처리해야할 데이터가 많을 때는 제너레이터 표현식을 고려하자.</h2>
<p>리스트 컴프리헨션은 각 아이템을 하나씩 복사해서 새 시퀀스를 만들 수 있다. 이 방법은 메모리를 많이 소모해서 문제를 일으킬 수 있다. 제너레이터 표현식은 메모리에 해당 시퀀스를 로딩하지 않고 iterator를 반환한다. 또한 한 제너레이터에서 나온 이터레이터를 다른 제너레이터 표현식의 서브 표현식으로 넘겨 조합할 수 있다.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>&gt;&gt;&gt; it = (len(x) for x in open('/Users/hello/Downloads/test.txt'))
&gt;&gt;&gt; it
&lt;generator object &lt;genexpr&gt; at 0x100c0eaf0&gt;
&gt;&gt;&gt; roots = ((x, x**0.5) for x in it)
&gt;&gt;&gt; print(next(roots))
(5, 2.23606797749979)
</code></pre>
</div>
<p><br /></p>

<h2 id="range-enumerate-">range보다는 enumerate를 사용하자.</h2>
<p>리스트를 순회하고 싶을때 리스트의 길이를 알아내서 range로 순회할 수도 있지만 세련되지 못하다. 파이썬에서는 이런 상황을 위해 iterator를 감싼 지연 iterator인 enumerate를 제공한다.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>&gt;&gt;&gt; flavor_list = ['chocolate', 'icecream', 'cat']
&gt;&gt;&gt; for i, flavor in enumerate(flavor_list):
...     print("{} {}".format(i + 1, flavor))
...
1 chocolate
2 icecream
3 cat
</code></pre>
</div>
<p><br /></p>

<h2 id="zip-">이터레이터를 병렬로 처리하려면 zip을 사용하자</h2>
<p>zip은 지연 제너레이터로 둘 이상의 이터레이터로부터 다음 값을 담을 튜플을 얻는다. zip을 사용하는 코드는 인덱스로 다중 리스트에 접근하는 코드보다 이해하기 쉽다. 다만 이터레이터의 길이가 다르다면 결과를 잘라내기 때문에 이 경우는 zip_longest를 고려하자.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>&gt;&gt;&gt; names = ['erin', 'dragonist', 'jb']
&gt;&gt;&gt; letters = [len(name) for name in names]
&gt;&gt;&gt; for name, count in zip(names, letters):
...     print(name, count)
...
('erin', 4)
('dragonist', 9)
('jb', 2)
</code></pre>
</div>
<p><br /></p>

<h2 id="for--while---else---">for 와 while 루프 뒤에는 else 블록을 쓰지 말자</h2>
<p>파이썬 루프에는 다른 언어에는 없는 else 블록이 있다. Else 블록은 일반적으로 이전 블록이 실행되지 않으면 실행된다는 의미지만, for/else에서는 for의 실행이 완료되었을 때 else가 실행된다. 뭔가를 검색할때 for/else를 사용할 수 있지만 이를 통해 얻는 이점이 적다. 혼동하기 쉬운 문법이므로 사용하지 말자.</p>

<p><br /></p>

<h2 id="tryexceptelsefinally----">Try/except/else/finally에서 각 블록의 장점을 이용하자</h2>
<p>Try/except/else 에서 else는 예외가 일어나지 않았을 경우 실행되어 except 처리와 시각적으로 구분이 된다. else 블록은 try 블록에 있는 코드의 양을 줄이는데 도움을 준다.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>&gt;&gt;&gt; def load_json_key(data, key):
...    try:
...       result_dict = json.loads(data)
...    except ValueError as e:
...         raise KeyError from e
...    else:
...        return result_dict[key]
</code></pre>
</div>

<p><br /></p>

<p><a href="http://www.aladin.co.kr/shop/wproduct.aspx?ItemId=80277523">
  <img class="book" style="width: 30%; height: 30%" src="http://image.aladin.co.kr/product/8027/75/cover/k212434638_1.jpg" />
</a></p>

</article>



<section class="tags">
  <strong>Tags:</strong> <a href="/tag/Python">Python</a>,&nbsp;<a href="/tag/effective">effective</a>
</section>








<section class="disqus">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname = 'underlinee';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>



</div>
</div>

    </div>

    <footer class="site-footer" style="background-image: url(/assets/footer_image.jpg)";>

  <div class="wrapper">

    <h3 class="footer-heading">Underlinee</h3>

    <div class="site-navigation">

      <p><strong>Site Map</strong></p>
      <ul class="pages">
        
        
        
        
          <li class="nav-link"><a href="/bookshelf/">Bookshelf</a>
        
        
        
        
        
        
        
        
        
          <li class="nav-link"><a href="/posts/">Posts</a>
        
        
        
        
        
        
      </ul>
    </div>

    <div class="site-contact">

      <p><strong>Contact</strong></p>
      <ul class="social-media-list">
        <li>
          <a href="mailto:jb.squee@daum.net">
            <i class="fa fa-envelope-o"></i>
            <span class="username">jb.squee@daum.net</span>
          </a>
        </li>
      </ul>
    </div>

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js"></script>

<script type="text/javascript">
$(document).ready(function() {
  // Default syntax highlighting
  hljs.initHighlightingOnLoad();

  // Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });
});

</script>




<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-112755509-1', 'auto');
  ga('send', 'pageview', {
    'page': '/devbook/2018/03/02/9791186978825.html',
    'title': '이펙티브 파이썬 - 파이썬다운 생각'
  });
</script>



  </body>

</html>
